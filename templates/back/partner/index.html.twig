{% extends 'back/base_bo.html.twig' %}

{% block title %}Partenaires du territoire{% endblock %}

{% block content %}
    <div data-ajax-form>
        {% include '_partials/_modal_partner_delete.html.twig' %}
    </div>
    <section class="fr-pt-4v">
        {% include 'back/breadcrumb_bo.html.twig' with {
            'level2Title': 'Outils admin',
            'level2Link': '',
            'level2Label': '',
            'level3Title': 'Partenaires',
            'level3Link': '',
        } %}

        {% if is_granted('ROLE_ADMIN_TERRITORY') and not is_granted('ROLE_ADMIN') %}
        <div class="fr-notice fr-notice--warning fr-mb-3v">
            <div class="fr-container">
                <div class="fr-notice__body">
                    <p>
                        <span class="fr-notice__desc">
                            Les responsables de territoire sont en charge de la gestion des utilisateurs.
                            Pour des raisons de sécurité, nous vous recommandons de vérifier régulièrement les comptes inutilisés et de les supprimer le cas échéant.
                        </span>
                    </p>
                    <button title="Masquer le message" class="fr-btn--close fr-btn">Masquer le message</button>
                </div>
            </div>
        </div>
        {% endif %}

        <header>
            <div class="fr-grid-row fr-grid-row--gutters">
                <div class="fr-col-12 fr-col-md-6">
                    <h1 class="fr-mb-0">Partenaires</h1>
                </div>
                <div class="fr-col-12 fr-col-md-6 fr-text--md-right">
                    <a
                        class="fr-btn fr-btn--success fr-btn--icon-left fr-fi-add-circle-line fr-btn--block fr-btn--md-inline"
                        href="{{ path('back_partner_new') }}"
                        >Ajouter un partenaire</a>
                </div>
            </div>
        </header>

    </section>

    {{ form_start(form) }}

    <section class="fr-col-12" aria-labelledby="filters-title">
        {% include '_partials/back/filters-title.html.twig' with {
            'skiplink_href': '#list-partners',
            'skiplink_label': 'Accéder à la liste des partenaires'
        } %}
        {{ form_errors(form) }}
        <div class="fr-grid-row fr-grid-row--bottom fr-grid-row--gutters">
        
            <div class="fr-col-12 fr-col-lg-4">
                {{ form_row(form.queryPartner) }}
            </div>
            {% if is_granted('ROLE_ADMIN') %}
                <div class="fr-col-12 fr-col-lg-4">
                    {{ form_row(form.territoire) }}
                </div>
            {% endif %}
            <div class="fr-col-12 fr-col-lg-4">
                {{ form_row(form.partnerType) }}
            </div>
            <div class="fr-col-12 fr-col-lg-4">
                {{ form_row(form.isOnlyInterconnected) }}
            </div>
            <div class="fr-col-12 fr-col-lg-4">
                {{ form_row(form.isNotNotifiable) }}
            </div>
            <div class="fr-col-12 fr-col-lg-4">
                <a href="{{ path('back_partner_index') }}" class="fr-link fr-link--icon-left fr-icon-close-circle-line">Réinitialiser les résultats</a>
            </div>
    </section>

    <section class="fr-col-12 fr-py-5v" id="title-list-results" aria-labelledby="desc-table">
        {% include 'back/partner/_title-list-results.html.twig' %}
    </section>
    
    <section class="fr-col-12 fr-col-lg-3 fr-pt-0">
        {{ form_row(form.orderType) }}
    </section>

    {{ form_end(form) }}

    <section class="fr-col-12" id="table-list-results">
        {% include 'back/partner/_table-list-results.html.twig' %}
    </section>
{% endblock %}