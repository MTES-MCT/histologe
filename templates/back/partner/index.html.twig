{% extends 'back/base_bo.html.twig' %}

{% block title %}Partenaire index{% endblock %}

{% block content %}
    <section class="fr-grid-row fr-grid-row--middle fr-p-5v ">
        <div class="fr-col-6">
            <h1 class="fr-h2 fr-mb-0">Partenaires</h1>
        </div>
        <div class="fr-col-6 fr-text--right">
            <a class="fr-btn fr-btn--icon-left fr-fi-add-circle-line" href="{{ path('back_partner_new') }}">Ajouter
                un partenaire</a>
        </div>
    </section>
    <section class="fr-col-12 fr-table fr-table--bordered fr-pt-0">
        <table class="fr-display-inline-table">
            <thead>
            <tr>
                <th>Id</th>
                <th>Nom</th>
                <th>Type</th>
                <th>INSEE</th>
                <th>Mail générique ?</th>
                <th class="fr-text--right">actions</th>
            </tr>
            </thead>
            <tbody>
            {% for partner in partners %}
                <tr class="partner-row">
                    <td>{{ partner.id }}</td>
                    <td>{{ partner.nom }}</td>
                    <td>{{ partner.isCommune ? 'Commune':'Partner' }}</td>
                    <td>
                        {% for insee in partner.insee %}
                            <div class="fr-badge fr-badge--blue-ecume">{{ insee }}</div>
                        {% endfor %}
                    </td>
                    <td>{{ partner.email }}</td>
                    <td class="fr-text--right">
                        <a href="{{ path('back_partner_edit', {'id': partner.id}) }}"
                           class="fr-btn fr-fi-eye-fill fr-btn--sm"></a>
                        <button data-delete="{{ path('back_partner_delete', {'id': partner.id}) }}"
                                data-token="{{ csrf_token('partner_delete_' ~ partner.id) }}"
                                class="fr-btn fr-btn--danger fr-fi-delete-line fr-btn--sm partner-row-delete"></button>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="3">no records found</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <div class="fr-grid-row fr-mt-2v fr-grid-row--center">
            <nav role="navigation" class="fr-pagination" aria-label="Pagination">
                <ul class="fr-pagination__list">
                    <li>
                        <a class="fr-pagination__link fr-pagination__link--first"
                                {% if pages > 1 %}
                                    href="{{ path('back_partner_index', {page : 1 }) }}"
                                {% else %}
                                    aria-disabled="true"
                                {% endif %}>
                            Première page
                        </a>
                    </li>
                    <li>
                        <a class="fr-pagination__link fr-pagination__link--prev fr-pagination__link--lg-label"
                            {% if pages > 1 and page != 1 %}
                                href="{{ path('back_partner_index', {page : page - 1 }) }}"
                            {% else %}
                                aria-disabled="true"
                            {% endif %} role="link">
                            Page précédente
                        </a>
                    </li>
                    <li>
                        <a class="fr-pagination__link"  {{ page == 1 ? 'aria-current="page"' : '' }}
                           title="Page 1"
                           data-page="1"  href="{{ path('back_partner_index', {page : 1 }) }}">
                            1
                        </a>
                    </li>
                    {% if pages > 1 %}
                        {% for i in 2..pages %}
                            <li class="{% if loop.index > 2 and loop.index < pages-3 %}fr-hidden{% endif %}">
                                <a class="fr-pagination__link" {{ page == i ? 'aria-current="page"' : '' }}
                                   href="{{ path('back_partner_index', {page : i}) }}" title="Page {{ i }}"
                                   data-page="{{ i }}" >
                                    {{ i }}
                                </a>
                            </li>
                            {% if loop.index is same as(3) %}
                                <li>
                                    <a class="fr-pagination__link" title="placeholder">
                                        ...
                                    </a>
                                </li>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    <li>
                        <a class="fr-pagination__link fr-pagination__link--next fr-pagination__link--lg-label"
                            {% if pages > 1  and page < pages %}
                                href="{{ path('back_partner_index', {page : page + 1 }) }}"
                            {% else %}
                                aria-disabled="true"
                            {% endif %} role="link">
                            Page suivante
                        </a>
                    </li>
                    <li>
                        <a class="fr-pagination__link fr-pagination__link--last"
                           {% if pages > 1 %}
                               href="{{ path('back_partner_index', {page : pages }) }}"
                           {% else %}
                               aria-disabled="true"
                           {% endif %}
                           data-page="{{ pages }}">
                            Dernière page
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </section>


{% endblock %}
