<dialog aria-labelledby="fr-modal-title-modal-edit-address" role="dialog" id="fr-modal-edit-address" class="fr-modal">
    <div class="fr-container fr-container--fluid fr-container-md">
        <div class="fr-grid-row fr-grid-row--center">
            <div class="fr-col-12 fr-col-md-8">
                <form method="POST" id="form-edit-address" enctype="application/json" action="{{ path('back_signalement_edit_address',{uuid:signalement.uuid}) }}">
                    <div class="fr-modal__body">
                        <div class="fr-modal__header">
                            <button type="button" class="fr-btn--close fr-btn" aria-controls="fr-modal-edit-address">Fermer</button>
                        </div>
                        <div class="fr-modal__content">
                            <h1 id="fr-modal-title-modal-edit-address" class="fr-modal__title">
                                Modifier l'adresse du logement
                            </h1>

                            <div class="fr-grid-row fr-grid-row--gutters">
                                <div class="fr-col-12 fr-col-md-6">
                                    <h2 class="fr-h5">Adresse postale</h2>

                                    <div class="fr-input-group">
                                        <label class="fr-label" for="edit-address-search">
                                            Adresse du logement
                                            <span class="fr-hint-text">Tapez l'adresse et sélectionnez-la dans la liste</span>
                                        </label>
                                        <input class="fr-input search-address-autocomplete" type="text" id="edit-address-search"
                                            data-fr-adresse-autocomplete="true" 
                                            data-autocomplete-query-selector="#form-edit-address .fr-address-group-bo"
                                            data-form-id="form-edit-address" 
                                            data-form-lat="{% if signalement.geoloc.lat is defined %}{{ signalement.geoloc.lat }}{% endif %}" 
                                            data-form-lng="{% if signalement.geoloc.lng is defined %}{{ signalement.geoloc.lng }}{% endif %}" 
                                            {% if is_granted('ROLE_ADMIN') is not same as true %}data-form-limit="{{ signalement.territory.zip }}" {% endif %}>
                                        <div class="fr-grid-row fr-background-alt--blue-france fr-text-label--blue-france fr-address-group-bo">
                                        </div>
                                    </div>

                                    <div class="fr-input-group">
                                        <label class="fr-label" for="form-edit-address-adresse">Numéro et voie</label>
                                        <input class="fr-input" id="form-edit-address-adresse" type="text" name="adresse" value="{{ signalement.adresseOccupant }}" data-autocomplete-addresse="true">
                                    </div>

                                    <div class="fr-input-group">
                                        <label class="fr-label" for="form-edit-address-codepostal">Code postal</label>
                                        <input class="fr-input" id="form-edit-address-codepostal" type="text" name="codePostal" value="{{ signalement.cpOccupant }}" data-autocomplete-codepostal="true">
                                    </div>

                                    <div class="fr-input-group">
                                        <label class="fr-label" for="form-edit-address-ville">Commune</label>
                                        <input class="fr-input" id="form-edit-address-ville" type="text" name="ville" value="{{ signalement.villeOccupant }}" data-autocomplete-ville="true">
                                    </div>

                                    <input type="hidden" name="insee" value="{{ signalement.inseeOccupant }}" data-autocomplete-insee="true">
                                    <input type="hidden" name="geolocLat" value="{% if signalement.geoloc.lat is defined %}{{ signalement.geoloc.lat }}{% endif %}" data-autocomplete-geoloclat="true">
                                    <input type="hidden" name="geolocLng" value="{% if signalement.geoloc.lng is defined %}{{ signalement.geoloc.lng }}{% endif %}" data-autocomplete-geoloclng="true">
                                </div>
                                <div class="fr-col-12 fr-col-md-6">
                                    <h2 class="fr-h5">Complément d'adresse (facultatif)</h2>

                                    <div class="fr-input-group">
                                        <label class="fr-label" for="adresseEtage">Etage
                                            <span class="fr-hint-text">5 caractères maximum</span>
                                        </label>
                                        <input class="fr-input" type="text" id="adresseEtage" name="etage" value="{{ signalement.etageOccupant }}" maxlength="5">
                                    </div>

                                    <div class="fr-input-group">
                                        <label class="fr-label" for="adresseEscalier">Escalier
                                            <span class="fr-hint-text">3 caractères maximum</span>
                                        </label>
                                        <input class="fr-input" type="text" id="adresseEscalier" name="escalier" value="{{ signalement.escalierOccupant }}" maxlength="3">
                                    </div>

                                    <div class="fr-input-group">
                                        <label class="fr-label" for="adresseNumAppart">Numéro d'appartement
                                            <span class="fr-hint-text">5 caractères maximum</span>
                                        </label>
                                        <input class="fr-input" type="text" id="adresseNumAppart" name="numAppart" value="{{ signalement.numAppartOccupant }}" maxlength="5">
                                    </div>

                                    <div class="fr-input-group">
                                        <label class="fr-label" for="adresseAutre">Autre (résidence, lieu-dit...)
                                            <span class="fr-hint-text">255 caractères maximum</span>
                                        </label>
                                        <input class="fr-input" type="text" id="adresseAutre" name="autre" value="{{ signalement.adresseAutreOccupant }}" maxlength="255">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="fr-modal__footer">
                            <ul class="fr-btns-group fr-btns-group--right fr-btns-group--inline-lg fr-btns-group--icon-left">
                                <li>
                                    <button type="button" class="fr-btn fr-btn--secondary fr-icon-close-line"
                                            aria-controls="fr-modal-edit-address">
                                        Annuler
                                    </button>
                                </li>
                                <li>
                                    <button class="fr-btn  fr-icon-checkbox-line" type="submit">
                                        Valider
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <input type="hidden" name="_token" value="{{ csrf_token('signalement_edit_address_'~signalement.id) }}">
                </form>
            </div>
        </div>
    </div>
</dialog>
