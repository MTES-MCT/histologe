<hr class="fr-mt-3w">

<div class="fr-grid-row">
    <div class="fr-col-9 fr-col-md-6">
        <h3 class="fr-h5">Composition du logement</h3>
    </div>
</div>

<div class="fr-container--fluid">
    <div class="fr-grid-row fr-grid-row--gutters">
        <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
            <strong>Logement :</strong> {{ signalement.typeCompositionLogement.compositionLogementPieceUnique is same as 'piece_unique' ? 'Pièce unique' : 'Plusieurs pièces' }}
        </div>
        
        <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
            <strong>Superficie totale :</strong> {{ signalement.superficie }}m²
        </div>
        
        <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
            <strong>Nombre de pièces à vivre :</strong> {{ signalement.typeCompositionLogement.compositionLogementNbPieces }}
        </div>
        
        <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
            <strong>RDC :</strong> {{ signalement.typeCompositionLogement.typeLogementRdc ?? 'non' }}
        </div>
        
        <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
            <strong>Dernier étage :</strong> {{ signalement.typeCompositionLogement.typeLogementDernierEtage ?? 'non' }}
        </div>
        
        <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
            {% if signalement.typeCompositionLogement.typeLogementDernierEtage is same as 'oui' %}
                <strong>Combles sans fenêtres :</strong> {{ signalement.typeCompositionLogement.typeLogementSousCombleSansFenetre ?? 'non' }}
                {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementSousCombleSansFenetre is same as 'oui' } %}
        
            {% elseif signalement.typeCompositionLogement.typeLogementRdc is not same as 'oui' and signalement.typeCompositionLogement.typeLogementDernierEtage is not same as 'oui' %}
                <strong>Sous-sol sans fenêtres :</strong> {{ signalement.typeCompositionLogement.typeLogementSousSolSansFenetre ?? 'non' }}
                {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementSousSolSansFenetre is same as 'oui' } %}
            {% endif %}
        </div>
        
        {% for i in 0..signalement.typeCompositionLogement.compositionLogementNbPieces - 1 %}
            <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
                <strong>Pièce à vivre {{ loop.index }} :</strong>
                <br>
                Superficie : {{ signalement.typeCompositionLogement.typeLogementPiecesAVivrePieceSuperficie[i] }}
                <br>
                Hauteur > 2,20m : {{ signalement.typeCompositionLogement.typeLogementPiecesAVivrePieceHauteur[i] }}
            </div>
        {% endfor %}

        <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
            <strong>Cuisine / coin cuisine :</strong>
            <br>
            <ul>
                <li>
                    Dans le logement : {{ signalement.typeCompositionLogement.typeLogementCommoditesCuisine }}
                    {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementCommoditesCuisine is same as 'non' } %}
                </li>
                {% if signalement.typeCompositionLogement.typeLogementCommoditesCuisine is same as 'non' %}
                    <li>
                        Collective : {{ signalement.typeCompositionLogement.typeLogementCommoditesCuisineCollective }}
                        {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementCommoditesCuisineCollective is same as 'non' } %}
                    </li>
                {% else %}
                    <li>
                        Hauteur > 2m : {{ signalement.typeCompositionLogement.typeLogementCommoditesCuisineHauteurPlafond }}
                        {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementCommoditesCuisineHauteurPlafond is same as 'non' } %}
                    </li>
                {% endif %}
            </ul>
        </div>

        <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
            <strong>SDB (baignoire ou douche) :</strong>
            <br>
            <ul>
                <li>
                    Dans le logement : {{ signalement.typeCompositionLogement.typeLogementCommoditesSalleDeBain }}
                    {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementCommoditesSalleDeBain is same as 'non' } %}
                </li>
                {% if signalement.typeCompositionLogement.typeLogementCommoditesSalleDeBain is same as 'non' %}
                    <li>
                        Collective : {{ signalement.typeCompositionLogement.typeLogementCommoditesSalleDeBainCollective }}
                        {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementCommoditesSalleDeBainCollective is same as 'non' } %}
                    </li>
                {% else %}
                    <li>
                        Hauteur > 2m : {{ signalement.typeCompositionLogement.typeLogementCommoditesSalleDeBainHauteurPlafond }}
                        {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementCommoditesSalleDeBainHauteurPlafond is same as 'non' } %}
                    </li>
                {% endif %}
            </ul>
        </div>

        <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
            <strong>WC :</strong>
            <br>
            <ul>
                <li>
                    Dans le logement : {{ signalement.typeCompositionLogement.typeLogementCommoditesWc }}
                    {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementCommoditesWc is same as 'non' } %}
                </li>
                {% if signalement.typeCompositionLogement.typeLogementCommoditesWc is same as 'non' %}
                    <li>
                        Collectifs : {{ signalement.typeCompositionLogement.typeLogementCommoditesWcCollective }}
                        {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementCommoditesWcCollective is same as 'non' } %}
                    </li>
                {% else %}
                    <li>
                        Hauteur > 2m : {{ signalement.typeCompositionLogement.typeLogementCommoditesWcHauteurPlafond }}
                        {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementCommoditesWcHauteurPlafond is same as 'non' } %}
                    </li>
                {% endif %}
            </ul>
        </div>

        {% if signalement.typeCompositionLogement.typeLogementCommoditesCuisine is same as 'oui' and signalement.typeCompositionLogement.typeLogementCommoditesWc is same as 'oui' %}
        <div class="fr-col-12 fr-col-md-4 fr-mb-1v">
            <strong>WC et cuisine dans la même pièce :</strong>
            {{ signalement.typeCompositionLogement.typeLogementCommoditesWcCuisine }}
            {% include '_partials/signalement/display_alert.html.twig' with { 'display': signalement.typeCompositionLogement.typeLogementCommoditesWcCuisine is same as 'oui' } %}
        </div>
        {% endif %}
    </div>
</div>

<hr class="fr-mt-3w">

<div class="fr-grid-row">
    <div class="fr-col-9 fr-col-md-6">
        <h3 class="fr-h5">Informations</h3>
    </div>
    <div class="fr-col-3 fr-col-md-6 fr-text--right">
        <button class="fr-btn fr-btn--sm fr-btn--secondary fr-btn--icon-left fr-fi-file-pdf-line" data-fr-opened="false" id="modal-dpe-opener" aria-controls="modal-dpe"
                data-dpe-url="https://koumoul.com/data-fair/api/v1/datasets/dpe-france/values_agg?field=code_insee_commune_actualise&format=json&agg_size=20&q_mode=simple&geo_adresse_in={{ (signalement.adresseOccupant~' '~signalement.cpOccupant~' '~signalement.villeOccupant)|replace({'  ':' '})|url_encode }}&size=100&select=%2A&sampling=neighbors">
            Consulter le(s) DPE
        </button>
    </div>
</div>

<div class="fr-container--fluid">
    <div class="fr-grid-row fr-grid-row--gutters">
        {% if signalement.isNotOccupant %}
        <div class="fr-col-12 fr-col-md-6 fr-mb-1v">
            <div class="fr-p-3v fr-background-alt--grey">
                <div class="fr-grid-row">
                    <div class="fr-col-12 fr-col-md-9">
                        <h4 class="fr-h6">Coordonnées du tiers déclarant</h4>
                    </div>
                    <div class="fr-col-12 fr-col-md-3 fr-text--right">
                        <a href="#">Modifier</a>
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Nom :</strong> {{ signalement.nomDeclarant }}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Prénom :</strong> {{ signalement.prenomDeclarant }}
                    </div>
                    <div class="fr-col-12">
                        <strong>Courriel :</strong>
                        <a href="mailto:{{ signalement.mailDeclarant }}">{{ signalement.mailDeclarant }}</a>
                    </div>
                    <div class="fr-col-12">
                        <strong>Tél. :</strong> {{ signalement.telDeclarantDecoded }}
                    </div>
                    {% if signalement.lienDeclarantOccupant %}
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Lien :</strong>
                        {{ signalement.lienDeclarantOccupant|signalement_lien_declarant_occupant }}
                    </div>
                    {% endif %}
                    {% if signalement.structureDeclarant %}
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Structure :</strong> {{ signalement.structureDeclarant }}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}

        <div class="fr-col-12 fr-col-md-6 fr-mb-1v">
            <div class="fr-p-3v fr-background-alt--grey">
                <div class="fr-grid-row">
                    <div class="fr-col-12 fr-col-md-9">
                        <h4 class="fr-h6">Coordonnées du foyer</h4>
                    </div>
                    <div class="fr-col-12 fr-col-md-3 fr-text--right">
                        <a href="#">Modifier</a>
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Nom :</strong> {{ signalement.nomOccupant }}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Prénom :</strong> {{ signalement.prenomOccupant }}
                    </div>
                    <div class="fr-col-12">
                        <strong>Courriel :</strong>
                        <a href="mailto:{{ signalement.mailOccupant }}">{{ signalement.mailOccupant }}</a>
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Tél. :</strong>
                        <a href="tel:{{ signalement.telOccupantDecoded }}">{{ signalement.telOccupantDecoded }}</a>
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Tél. sec. :</strong>
                        <a href="tel:{{ signalement.telOccupantBisDecoded }}">{{ signalement.telOccupantBisDecoded }}</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="fr-col-12 fr-col-md-6 fr-mb-1v">
            <div class="fr-p-3v fr-background-alt--grey">
                <div class="fr-grid-row">
                    <div class="fr-col-12 fr-col-md-9">
                        <h4 class="fr-h6">Coordonnées du bailleur</h4>
                    </div>
                    <div class="fr-col-12 fr-col-md-3 fr-text--right">
                        <a href="#">Modifier</a>
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Nom :</strong> {{ signalement.nomProprio ?? 'N/R' }}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Prénom :</strong> {{ signalement.prenomProprio ?? 'N/R' }}
                    </div>
                    <div class="fr-col-12">
                        <strong>Courriel :</strong>
                        {% if signalement.mailProprio %}
                        <a href="mailto:{{ signalement.mailProprio }}">{{ signalement.mailProprio }}</a>
                        {% else %}
                        N/R
                        {% endif %}
                    </div>
                    <div class="fr-col-12">
                        <strong>Tél. :</strong>
                        {% if signalement.telProprio %}
                        <a href="mailto:{{ signalement.telProprioDecoded }}">{{ signalement.telProprioDecoded }}</a>
                        {% else %}
                        N/R
                        {% endif %}
                    </div>
                    <div class="fr-col-12">
                        <strong>Adresse :</strong> {{ signalement.adresseProprio ?? 'N/R' }}
                    </div>
                </div>
            </div>
        </div>

        <div class="fr-col-12 fr-col-md-6 fr-mb-1v">
            <div class="fr-p-3v fr-background-alt--grey">
                <div class="fr-grid-row">
                    <div class="fr-col-12 fr-col-md-9">
                        <h4 class="fr-h6">Informations sur le logement</h4>
                    </div>
                    <div class="fr-col-12 fr-col-md-3 fr-text--right">
                        <a href="#">Modifier</a>
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Type :</strong> {{ signalement.natureLogement|capitalize }}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Nb. personnes :</strong> {{ signalement.typeCompositionLogement.compositionLogementNombrePersonnes }}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Enfants -6 ans :</strong>
                        {% if signalement.typeCompositionLogement.compositionLogementEnfants is null %}
                            {{ static_picto_nsp|raw }}
                        {% elseif signalement.typeCompositionLogement.compositionLogementEnfants %}
                            {{ static_picto_yes|raw }}
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Date arrivée :</strong> {{ signalement.typeCompositionLogement.bailDpeDateEmmenagement }}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Bail :</strong>
                        {% if signalement.typeCompositionLogement.bailDpeBail is null %}
                            {{ static_picto_nsp|raw }}
                        {% elseif signalement.typeCompositionLogement.bailDpeBail %}
                            {{ static_picto_yes|raw }}
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Etat des lieux :</strong>
                        {% if signalement.typeCompositionLogement.bailDpeEtatDesLieux is null %}
                            {{ static_picto_nsp|raw }}
                        {% elseif signalement.typeCompositionLogement.bailDpeEtatDesLieux %}
                            {{ static_picto_yes|raw }}
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>DPE :</strong>
                        {% if signalement.typeCompositionLogement.bailDpeDpe is null %}
                            {{ static_picto_nsp|raw }}
                        {% elseif signalement.typeCompositionLogement.bailDpeDpe %}
                            {{ static_picto_yes|raw }}
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <div class="fr-col-12 fr-col-md-6 fr-mb-1v">
            <div class="fr-p-3v fr-background-alt--grey">
                <div class="fr-grid-row">
                    <div class="fr-col-12 fr-col-md-9">
                        <h4 class="fr-h6">Situation du foyer</h4>
                    </div>
                    <div class="fr-col-12 fr-col-md-3 fr-text--right">
                        <a href="#">Modifier</a>
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Logement social :</strong>
                        {% if signalement.isLogementSocial is null %}
                            {{ static_picto_nsp|raw }}
                        {% elseif signalement.isLogementSocial %}
                            {{ static_picto_yes|raw }}
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Demande relogement :</strong>
                        {% if signalement.isRelogement is null %}
                            {{ static_picto_nsp|raw }}
                        {% elseif signalement.isRelogement %}
                            {{ static_picto_yes|raw }}
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Allocataire :</strong>
                        {% if signalement.isAllocataire %}
                            <p class="fr-badge fr-badge--info fr-badge--no-icon">{{ signalement.isAllocataire }}</p>
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Date de naissance :</strong>
                        {% if (signalement.dateNaissanceOccupant) %}
                            {{ signalement.dateNaissanceOccupant.format('d/m/Y') }}
                        {% else %}
                            {{ signalement.naissanceOccupants ?? '-' }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>N° allocataire :</strong>
                        {% if signalement.isAllocataire %}
                            {{ signalement.numAllocataire }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Montant allocation :</strong>
                        {% if signalement.isAllocataire and signalement.situationFoyer.logementSocialMontantAllocation %}
                            {{ signalement.situationFoyer.logementSocialMontantAllocation }} €
                        {% else %}
                            /
                        {% endif %}
                    </div>
                    <div class="fr-col-12">
                        <strong>Souhaite quitter le logement :</strong>
                        {% if signalement.situationFoyer.travailleurSocialQuitteLogement is null %}
                            {{ static_picto_nsp|raw }}
                        {% elseif signalement.situationFoyer.travailleurSocialQuitteLogement is same as 'oui' %}
                            {{ static_picto_yes|raw }}
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12">
                        <strong>Accompagnement par un ou une travailleuse sociale :</strong>
                        {% if signalement.situationFoyer.travailleurSocialAccompagnementDeclarant is null %}
                            {{ static_picto_nsp|raw }}
                        {% elseif signalement.situationFoyer.travailleurSocialAccompagnementDeclarant is same as 'oui' %}
                            {{ static_picto_yes|raw }}
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <div class="fr-col-12 fr-col-md-6 fr-mb-1v">
            <div class="fr-p-3v fr-background-alt--grey">
                <div class="fr-grid-row">
                    <div class="fr-col-12 fr-col-md-9">
                        <h4 class="fr-h6">Procédure et démarches</h4>
                    </div>
                    <div class="fr-col-12 fr-col-md-3 fr-text--right">
                        <a href="#">Modifier</a>
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Bailleur averti :</strong>
                        {% if signalement.isProprioAverti %}
                            {{ static_picto_yes|raw }}
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12 fr-col-md-6">
                        <strong>Contact aussurance :</strong>
                        {% if signalement.informationProcedure.infoProcedureAssuranceContactee is null %}
                            {{ static_picto_nsp|raw }}
                        {% elseif signalement.informationProcedure.infoProcedureAssuranceContactee is same as 'oui' %}
                            {{ static_picto_yes|raw }}
                        {% else %}
                            {{ static_picto_no|raw }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12">
                        <strong>Réponse aussurance :</strong>
                        {% if signalement.informationProcedure.infoProcedureReponseAssurance is null %}
                            /
                        {% else %}
                            <br>
                            {{ signalement.informationProcedure.infoProcedureReponseAssurance|raw }}
                        {% endif %}
                    </div>
                    <div class="fr-col-12">
                        <strong>Souhaite garder le logement après travaux :</strong>
                        {% if signalement.informationProcedure.infoProcedureDepartApresTravaux is null %}
                            {{ static_picto_nsp|raw }}
                        {# Attention : formulation inversée par rapport au formulaire #}
                        {% elseif signalement.informationProcedure.infoProcedureDepartApresTravaux is same as 'oui' %}
                            {{ static_picto_no|raw }}
                        {% else %}
                            {{ static_picto_yes|raw }}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>