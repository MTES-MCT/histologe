<div class="fr-grid-row fr-mt-3v fr-mb-3w">
    <div class="fr-col-12 fr-col-md-6">
        {% if intervention is defined and intervention.type == enum('App\\Entity\\Enum\\InterventionType').VISITE_CONTROLE %}
            <div class="fr-mb-3v">
                <strong>Type de visite :</strong>
                {{ intervention.type.label() }}
            </div>
        {% endif %}
        <div class="fr-mb-3v">
            {% include 'back/signalement/view/visites/visite-status.html.twig' %}
        </div>
        <div class="fr-mb-3v">
            <strong>Date de visite :</strong>
            {% if signalement.interventions is empty or intervention.scheduledAt is empty %}
                Non renseignée
            {% else %}
                {{ (intervention.scheduledAt.format('H')) > 0
                ? intervention.scheduledAt|date('d/m/Y à H:i', signalement.getTimezone)
                : intervention.scheduledAt|date('d/m/Y') }}
            {% endif %}
        </div>
        <div class="fr-mb-3v">
            <strong>Occupant présent :</strong>
            {% if signalement.interventions is empty or intervention.occupantPresent is null %}
                Non renseigné
            {% elseif intervention.occupantPresent %}
                Oui
            {% else %}
                Non
            {% endif %}
        </div>
        <div class="fr-mb-3v">
            <strong>Propriétaire présent :</strong>
            {% if signalement.interventions is empty or intervention.proprietairePresent is null %}
                Non renseigné
            {% elseif intervention.proprietairePresent %}
                Oui
            {% else %}
                Non
            {% endif %}
        </div>
    </div>
    <div class="fr-col-12 fr-col-md-6">
        <div class="fr-mb-3v">
            <strong>Analyse :</strong>
            {% if signalement.interventions is empty or intervention.concludeProcedure is empty %}
                <span class="fr-badge fr-badge--no-icon" title="Non disponible">Non disponible</span>
            {% else %}
                {% for procedure in intervention.concludeProcedure %}
                    {% include '_partials/signalement/conclude-procedure.html.twig' %}
                {% endfor %}
            {% endif %}
        </div>
        <div class="fr-mb-3v">
            <strong>Partenaire :</strong>
            {% if signalement.interventions is empty or intervention.partner is empty %}
                Non renseigné
            {% else %}
                {{ intervention.partner.nom }}
                {% if intervention.externalOperator %}
                    <i>(opérateur externe)</i>
                {% elseif intervention.partner.territory is not same as signalement.territory or intervention.partner.isArchive %}
                    <i>(partenaire supprimé)</i>
                {% endif %}
            {% endif %}
        </div>
    </div>
    {% if signalement.interventions is not empty and intervention.status is same as constant('App\\Entity\\Intervention::STATUS_PLANNED') %}
        <div class="fr-col-12">
            <strong>Commentaire d'avant visite :</strong>
            <div class="fr-highlight fr-background--white fr-py-3v fr-my-3v fr-ml-0">
                {% if intervention.commentBeforeVisite is empty %}
                    <p>Non renseigné</p>
                {% else %}
                    {{ intervention.commentBeforeVisite|raw }}
                {% endif %}
            </div>
        </div>
    {% else %}
        <div class="fr-col-12">
            <strong>
                Commentaire du partenaire :
                {% if intervention.conclusionVisiteEditedAt is defined and intervention.conclusionVisiteEditedAt is not null %}
                    <i>(édité le {{ intervention.conclusionVisiteEditedAt|date('d/m/Y') }})</i>
                {% endif %}
            </strong>
            <div class="fr-highlight fr-background--white fr-py-3v fr-my-3v fr-ml-0">
                {% if signalement.interventions is empty or intervention.details is empty %}
                    <p>Non renseigné</p>
                {% else %}
                    {{ intervention.details|raw }}
                {% endif %}
            </div>
        </div>
    {% endif %}
</div>

{% if intervention is defined and isForBO is defined and isForBO %}
    {% include 'back/signalement/view/photos-documents.html.twig' with {'zonetitle': null,'filesFilter': 'visite','interventionId': intervention.id} %}
{% endif %}
