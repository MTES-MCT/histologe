{% extends 'base.html.twig' %}

{% block title %}Votre documents et photos du dossier #{{ signalement.reference }}{% endblock %}

{% block body %}

{% if (is_granted('SIGN_USAGER_EDIT', signalement)) %}
	{% include '_partials/_modal_upload_files_usager.html.twig' with {'criteres': infoDesordres['criteres']} %}
{% endif %}

<main class="fr-container fr-pb-5w" id="content">
	<nav role="navigation" class="fr-breadcrumb fr-mb-1w fr-mt-2w" aria-label="Voir le fil d'Ariane">
		<button class="fr-breadcrumb__button" aria-expanded="false" aria-controls="breadcrumb-1">Voir le fil d'Ariane</button>
		<div class="fr-collapse" id="breadcrumb-1">
			<ol class="fr-breadcrumb__list">
				<li><a class="fr-breadcrumb__link" href="{{ path('front_suivi_signalement', {code: signalement.codeSuivi}) }}">Votre dossier #{{ signalement.reference }}</a></li>
				<li><a class="fr-breadcrumb__link" aria-current="page">Documents et photos</a></li>
			</ol>
		</div>
	</nav>
	<div class="fr-grid-row fr-grid-row--gutters">

		<div class="fr-col-12 fr-col-md-6">
			<h1 class="title-blue-france">Les documents et photos du dossier</h1>
			{% include 'front/_partials/_suivi_signalement_card.html.twig' %}

			<h2 class="title-blue-france fr-mb-1w">Les documents du dossier</h2>
			<p>
				Gérez les documents du dossier. Cliquez sur un document pour l'afficher dans un nouvel onglet.
			</p>
			{% if (is_granted('SIGN_USAGER_EDIT', signalement)) %}
				<ul class="fr-btns-group fr-btns-group--icon-left">
					<li>
						<button 
							class="fr-btn fr-icon-add-line open-modal-upload-files-btn" 
							type="button" 
							data-fr-opened="false" 
							aria-controls="fr-modal-upload-files-usager" 
							data-file-type="document"
							data-accepted-type-mimes="{{ get_accepted_mime_type('document')}}"
							data-accepted-extensions="{{ get_accepted_extensions('document')}}"
							>
							Ajouter des documents
						</button>
					</li>
				</ul>
			{% else %}
				<div role="alert" class="fr-alert fr-alert--error fr-alert--sm">
					<p>Vous ne pouvez plus envoyer de documents.</p>
				</div>
			{% endif %}
		</div>

		<div class="fr-col-12 fr-col-md-6">
			<h2 class="title-blue-france fr-mb-1w">Les photos du dossier</h2>
			<p>
				Gérez les photos du dossier. Cliquez sur une photo pour l'afficher dans un nouvel onglet.
			</p>
			{% if (is_granted('SIGN_USAGER_EDIT', signalement)) %}
				<ul class="fr-btns-group fr-btns-group--icon-left">
					<li>
						<button 
							class="fr-btn fr-icon-add-line open-modal-upload-files-btn" 
							type="button" 
							data-fr-opened="false" 
							aria-controls="fr-modal-upload-files-usager" 
							data-file-type="photo"
							data-accepted-type-mimes="{{ get_accepted_mime_type('photo')}}"
							data-accepted-extensions="{{ get_accepted_extensions('photo')}}"
							>
							Ajouter des photos
						</button>
					</li>
				</ul>
			{% else %}
				<div role="alert" class="fr-alert fr-alert--error fr-alert--sm">
					<p>Vous ne pouvez plus envoyer de photos.</p>
				</div>
			{% endif %}
		</div>
	</div>

</main>
{% endblock %}
