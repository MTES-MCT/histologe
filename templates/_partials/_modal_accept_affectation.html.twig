<dialog aria-labelledby="modal-accept-affectation-title" id="accept-affectation-modal" class="fr-modal">
    <div class="fr-container fr-container--fluid fr-container-md">
        <div class="fr-grid-row fr-grid-row--center">
            <div class="fr-col-12 fr-col-md-10 fr-col-lg-10">
                <div class="fr-modal__body">
                    <div class="fr-modal__header">
                        <button type="button" class="fr-btn--close fr-btn" title="Fermer la fenêtre modale" aria-controls="accept-affectation-modal">Fermer</button>
                    </div>
                    <div class="fr-modal__content fr-text--left">
                        <h1 class="fr-modal__title" id="modal-accept-affectation-title">
                            Accepter et attribuer le dossier #{{ signalement.reference }}
                        </h1>
                        <p>Sélectionnez le ou les agents en charge de la gestion du dossier puis validez pour accepter l'affectation. Seuls les agents associés au dossier recevront les notifications concernant le dossier. Pour attribuer le dossier à tous les agents, cliquez sur "Tout sélectionner".</p>
                        <div class="fr-alert fr-alert--info fr-alert--sm fr-mb-3v" id="accept-affectation-info">
                            Vous devez sélectionner au moins un agent.
                        </div>
                        {{ form_start(acceptAffectationForm, {'attr': {'id': 'accept-affectation-form', 'data-submit-type':'formData'}}) }}
                        <div class="fr-mb-2v">
                            <button id="select-all-agents-accept-affectation" data-select-all-in-target=".agent-selection-container" class="fr-link">Tout sélectionner</button>
                        </div>
                        {{ form_errors(acceptAffectationForm) }}
                        <div class="fr-select-group agent-selection-container">
                            {{ form_label(acceptAffectationForm.agents, null, {'label_attr': {'class': 'fr-mb-2v', 'name': 'agents_selection[agents]'}}) }}
                            <div class="fr-grid-row">
                                {% for agent in acceptAffectationForm.agents %}
                                    <div class="fr-checkbox-group fr-col-6">
                                        {{ form_row(agent) }}
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        {{ form_end(acceptAffectationForm) }}
                    </div>
                    <div class="fr-modal__footer">
                        <ul class="fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left">
                            <li>
                                <button class="fr-btn fr-icon-check-line" form="accept-affectation-form" type="submit">
                                    Valider
                                </button>
                            </li>
                            <li>
                                <button type="button" class="fr-btn fr-btn--secondary fr-icon-close-line" aria-controls="accept-affectation-modal">
                                    Annuler
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</dialog>