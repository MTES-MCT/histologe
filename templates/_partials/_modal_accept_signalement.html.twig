<dialog aria-labelledby="accept-signalement-modal-title" id="accept-signalement-modal" class="fr-modal">
    <div class="fr-container fr-container--fluid fr-container-md">
        <div class="fr-grid-row fr-grid-row--center">
            <div class="fr-col-12 fr-col-md-10 fr-col-lg-10">
                <div class="fr-modal__body">
                    <div class="fr-modal__header">
                        <button type="button" class="fr-btn--close fr-btn" title="Fermer la fenêtre modale" aria-controls="accept-signalement-modal">Fermer</button>
                    </div>
                    <div class="fr-modal__content fr-text--left">
                        <h1 class="fr-modal__title" id="accept-signalement-modal-title">
                            Valider le signalement #{{ signalement.reference }}
                        </h1>
                        <p>
                            Sélectionnez le ou les responsables de territoire en charge de la gestion du dossier puis validez pour accepter le signalement.
                            Ces responsables de territoire recevront les notifications sur le dossier et apparaîtront dans la liste des agents abonnés au dossier.
                            Pour attribuer le dossier à tous les responsables de territoire, cliquez sur "Tout sélectionner".
                        </p>
                        <div class="fr-alert fr-alert--info fr-alert--sm fr-mb-3v" id="accept-signalement-info">
                            Vous devez sélectionner au moins un responsable de territoire.
                        </div>
                        {{ form_start(acceptSignalementForm, {'attr': {'id': 'accept-signalement-form', 'data-submit-type':'formData'}}) }}
                        <div class="fr-mb-2v">
                            <button id="select-all-agents-accept-signalement" data-select-all-in-target=".rt-selection-container" class="fr-link">Tout sélectionner</button>
                        </div>
                        {{ form_errors(acceptSignalementForm) }}
                        <div class="fr-select-group rt-selection-container">
                            {{ form_label(acceptSignalementForm.agents, null, {'label_attr': {'class': 'fr-mb-2v', 'name': 'agent_selection[agents]', 'data-error-target': '1'}}) }}
                            <div class="fr-grid-row">
                                {% for agent in acceptSignalementForm.agents %}
                                    <div class="fr-checkbox-group fr-col-6">
                                        {{ form_row(agent, {'id': 'accept_signalement_' ~ agent.vars.value}) }}
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        {{ form_end(acceptSignalementForm) }}
                    </div>
                    <div class="fr-modal__footer">
                        <ul class="fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left">
                            <li>
                                <button class="fr-btn fr-icon-check-line" form="accept-signalement-form" type="submit">
                                    Valider
                                </button>
                            </li>
                            <li>
                                <button type="button" class="fr-btn fr-btn--secondary fr-icon-close-line" aria-controls="accept-signalement-modal">
                                    Annuler
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</dialog>