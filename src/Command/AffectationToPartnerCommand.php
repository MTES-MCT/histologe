<?php

namespace App\Command;

use App\Entity\Affectation;
use App\Entity\Enum\SignalementStatus;
use App\Manager\AffectationManager;
use App\Manager\UserManager;
use App\Repository\PartnerRepository;
use App\Repository\SignalementRepository;
use Symfony\Component\Console\Attribute\AsCommand;
use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Symfony\Component\Console\Style\SymfonyStyle;
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBagInterface;

#[AsCommand(
    name: 'app:affectation-to-partner',
    description: 'Affect a list of signalements to a specific partner with a specific status',
)]
class AffectationToPartnerCommand extends Command
{
    private const SIGNALEMENTS_REFERENCE = ['2024-1784', '2023-118', '2022-2305', '2022-1275', '2024-206', '2023-1751', '2023-697', '2023-47', '2024-214', '2022-2615', '2023-2846', '2023-482', '2023-459', '2021-205', '2023-454 ', '2022-1846', '2023-1355', '2024-244', '2022-1631', '2023-261', '2024-3056', '2023-2213', '2024-1457', '2023-2231', '2021-454', '2023-2333', '2022-37', '2021-765', '2021-652', '2024-1958', '2021-735', '2024-724', '2025-142', '2023-1747', '2023-2324', '2025-80', '2022-157', '2023-2075', '2024-3182', '2023-2186', '2022-1927', '2024-160', '2023-2459', '2024-2628', '2023-2787', '2023-2299', '2021-1073', '2022-1245', '2022-157', '2021-1085', '2021-1081', '2023-1317', '2022-1263', '2022-62', '2022-337', '2023-770', '2022-611', '2024-2310', '2023-1143', '2021-1225', '2022-122', '2024-1034', '2021-1286', '2021-1286', '2022-146', '2022-1755', '2022-109', '2024-2059', '2022-100', '2023-2799', '2022-439', '2022-103', '2022-114', '2022-225', '2022-435', '2022-256', '2024-895', '2022-422', '2022-278', '2022-427', '2022-247', '2022-403', '2022-216', '2022-231', '2024-1124', '2022-519', '2024-1534', '2022-167', '2022-585', '2024-2077', '2024-1402', '2022-2661', '2023-1225', '2022-788', '2022-819', '2022-741', '2022-681', '2023-867', '2022-1040', '2023-1869', '2022-964', '2022-1020', '2022-1032', '2022-1030', '2022-1004', '2022-1156', '2022-208', '2024-856', '2023-2542', '2023-768', '2022-475', '2022-1257', '2024-473', '2022-1187', '2022-1232', '2022-721', '2022-1503', '2022-1428', '2023-2469', '2022-731', '2022-1292', '2022-1635', '2022-1609', '2022-1572', '2022-1611', '2022-1507', '2022-1541', ' 2022-745', '2022-1225', '2022-1668', '2022-16660', '2022-1694', '2022-1709', '2022-1807', '2024-197', '2023-1505', '2022-627', '2022-1894', '2022-1899', '2023-2341', '2022-1921', '2022-2079', '2022-2086', '2024-381', '2022-1021', '2022-2175', '2022-2058', '2022-2169', '2022-2150', '2022-2000', '2022-1898', '2022-1819', '2022-1721', '2022-1861', '2022-2190', '2022-2204', '2022-2291', '2022-2296', '2022-2167', '2022-2179', '2022-2403', '2022-2187', '2022-2151', '2022-2262', '2022-2303', '2022-2354', '2022-2374', '2022-2194', '2022-2164', '2022-2295', '2022-2394', '2022-2468', '2022-2423', '2022-2635', '2022-2490', '2022-2606', '2023-403', '2023-2453', '2022-2784', '2022-2670', '2022-2719', '2022-2744', '2022-2739', '2022/2728', '2022-2712', '2022-2813', '2022-2793', '2023-1012', '2023-87', '2023-10', '2023-100', '2023-124', '2023-174', '2023-168', '2023-197', '2023-223', '2024-1876', '2023-351', '2023-346', '2023-353', '2023-354', '2022-862', '2023-2567', '2023-2166', '2023-480', '2023-481', '2023-502', '2023-506', '2023-573', '2023-557', '2023-576', '2023-649', '2025-8', '2023-673', '2023-682', '2023-181', '2023-731', '2023-723', '2023-797', '2023-803', '2023-826', '2024-725', '2024-1873', '2023-845', '2022-2673', '2023-953', '2023-956', '2023-958', '2023-966', '2023-973', '2023_1031', '2023-1076', '2023-487', '2023-1132', '2023-899', '2023-758', '2023-716', '2023-788', '2023-690', '2023-1116', '2023-1182', '2023-1242', '2024-3201', '2023-1269', '2025-913', '2023-1285', '2023-1296', '2024-1368', '2023-2776', '2023-1313', '2023-1316', '2023-372', '2023-139', '2022-2602', '2022-491', '2022-2433', '2023-1321', '2023-1311', '2023-1441 ', '2023-1349', '2023-1340', '2023-1339', '2023-1343', '2022-2623', '2023-1409', '2023-1359', '2023-1378', '2024-115', '2023-1453', '2023-2092', '2023-1405', '2023-1395', '2023-1398', '2023-1413', '2023-1421', '2023-1419', '2023-1427', '2023-1435', '2023-1445', '2023-1452', '2023-1467', '2023-1455', '2023-1470', '2023-1469', '2023-1494', '2023-1481', '2023-1487', '2023-1387', '2023-1489', '2023-1530', '2023-1525', '2023-1515', '2023-1545', '2023-1582', '2023-1549', '2023-1569', '2023-1566', '2023-2693', '2023-1568', '2023-1565', '2023-1602', '2023-2454', '2023-1597', '2023-1590', '2023-1211', '2023-1689', '2023-1650', '2023-1662', '2024-255', '2024-013', '2023-2466', '2023-1733', '2023-1732', '2023-1963', '2023-1719', '2023-1709', '2023-1706', '2023-1705', '2023-1697', '2023-1696', '2023-1694', '2023-1759', '2023-783', '2024-1595', '2024-305', '2023-1278', '2024-1211', '2024-1616', '2023-1852', '2023-1809', '2023-1881', '2023-1735', '2023-1741', '2023-1739', '2023-1745', '2023-1736', '2023-1755', '2023-1775', '2023-1756', '2023-1752', '2023-1765', '2023-2242', '2023-1811', '2023-2812', '2023-1792', '2023-1783', '2023-1787', '2023-1871', '2023-1878', '2023-1870', '2023-1991', '2023-1819', '2023-1815', '2023-1814', '2023-1825', '2023-1823', '2023-1841', '2023-1849', '2023-1837', '2023-1829', '2023-1865', '2023-1867', '2023-1861', '2023-1866', '2023-1802', '2023-367', '2023-1314', '2023-1490', '2023-1128', '2022-1285', '2023-1944', '2023-501', '2023-1894', '2023-1898', '2023-634', '2023-2353', '2023-1900', '2023-1897', '2023-1906', '2023-1914', '2023-1903', '2023-1991', '2023-2096', '2023-1921', '2023-1917', '2023-1926', '2023-1940', '2023-1924', '2023-1919', '2023-1934', '2023-1955', '2023-1953', '2023-1939', '2023-1949', '2023-1982', '2023-1960', '2023-1985', '2023-1984', '2023-1987', '2023-1994', '2023-1957', '2023-2020', '2023-2011', '2023-2023', '2023-1999', '2023-1996', '2024-703', '2023-2681', '2023-2219', '2023-2201', '2024-1999', '2023-2024', '2022-1019', '2023-2060', '2023-2048', '2023-2057', '2023-2059', '2023-2064', '2023-2093', '2023-2094', '2023-2049', '2023-2109', '2023-2088', '2023-2111', '2023-2065', '2023-2029', '2023-2107', '2023-2112', '2023-2095', '2023-2056', '2023-316', '2023-842', '2023-2120', '2023-653', '2023-882', '2022-1969', '2023-2119', '2023-2113', '2023-2118', '2024-719', '2023-2122', '2023-2121', '2023-2126', '2023-2132', '2023-2129', '2023-2159', '2023-2162', '2023-2141', '2023-2647', '2023-2143', '2023-2142', '2023-2158', '2023-2145', '2023-2135', '2023-2149', '2023-2453', '2023-2169', '2023-2181', '2023-2175', '2023-2171', '2023-2184', '2023-2173', '2023-2177', '2023-2315', '2023-2185', '2023-2183', '2023-2194', '2023-2191', '2023-2192', '2023-2188', '2023-2190', '2023-2189', '2024-1067', '2023-2207', '2023-2195', '2023-2203', '2023-2084', '2023-2236', '2023-2216', '2023-2224', '2023-2222', '2023-2214', '2023-2208', '2023-2206', '2023-2204', '2023-2233', '2023-2232', '2023-2230', '2023-2229', '2023-2240', '2023-2239', '2023-2238', '2023-2254', '2023-2252', '2023-2289', '2023-2250', '2023-2246', '2023-2245', '2023-2244', '2023-2256', '2023-1640', '2023-2260', '2023-2255', '2023-2241', '2023-2312', '2023-2281', '2023-2277', '2023-2339', '2023-2345', '2023-2348', '2023-2268', '2023-2350', '2023-2346', '2023-2343', '2023-2311', '2023-2310', '2023-2327', '2023-2320', '2024-1027', '2023-2290', '2023-2267', '2023-2273', '2023-2304', '2023-2303', '2023.2323', '2023-2265', '2024-348', '2023-2288', '2023-2392', '2023-2298', '2023-2269', '2024-2278', '2023-2344', '2023-2284', '2023-2490', '2023-2294', '2023-2282', '2023-2278', '2023-2264', '2023-2322', '2023-2347', '2023-2359', '2024-2010', '2023-2370', '2023-2373', '2023-2366', '2023-2374', '2023-2513', '2023-2441', '2023-2502', '2023-2389', '2023-2394', '2023-2408', '2023-2401', '2023-2398', '2023-2399', '2024-3432', '2023-2383', '2023-2376', '2023-2468', '2023-2621', '2023-2428', '2023-2426', '2023-2422', '2023-2419', '2023-2415', '2024-2078', '2024-799', '2024-984', '2023-2377', '2023-2440', '2023-2433', '2023-2392', '2023-2411', '2023-2432', '2023-2386', '2023-2424', '2023-2442', '2023-2378', '2023-2375', '2023-2445', '2023-2438', '2023-2451', '2023-2643', '2023-2448', '2023-2446', '2023-2452', '2023-2638', '2023-2516', '2023-2462', '2023-2460', '2023-2464', '2023-2461', '2024-1670', '2024-670', '2023-2731', '2023-2836', '2023-2482', '2023-2480', '2023-2479', '2023-2476', '2023-2474', '2023-2472', '2024-126', '2023-2508', '2023-2504', '2023-2503', '2023-2501', '2023-2499', '2023-2498', '2023-2588', '2023-2568', '2023-2567', '2023-2558', '2023-2549', '2023-2531', '2023-2546', '2023-2529', '2023-2536', '2023-2540', '2023-2527', '2023-2512', '2023-2559', '2023-2566', '2023-2586', '2023-2584', '2023-2376', '2023-2585', '2023-2634', '2023-2360', '2023-2627', '2023-2620', '2023-2619', '2023-2617', '2023-2600', '2023-2616', '2023-2649', '2023-2071', '2023-2700', '2023-2686', '2023-2683', '2024-205', '2023-2718', '2024-1127', '2024-240', '2024-77', '2023-2652', '2023-2650', '2023-2704', '2023-2866', '2023-2707', '2023-2715', '2023-2727', '2023-2676', '2023-2668', '2023-2667', '2023-2666', '2023-2665', '2023-2661', '2023-1952', '2023-2659', '2023-2664', '2023-2694', '2023-2669', '2023-2677', '2023-2708', '2023-2733', '2023-2728', '2024-442', '2023-2759', '2023-2761', '2023-2756', '2023-2749', '2023-2735', '2023-2743', '2023-2742', '2023-2738', '2023-2794', '2023-2786', '2024-50', '2023-2876', '2023-2869', '2023-2865', '2023-2878', '2023-2804', '2023-2882', '2024-158', '2024-1537', '2024-209', '2024-6', '2024-215', '2023-2809', '2023-2813', '2024-208', '2024-1214', '2023-2819', '2023-2827', '2023-2898', '2024-141', '2024-796', '2022-2319', '2024-219', '2024-273', '2023-1777', '2024-360', '2023-960', '2024-349', '2024-330', '2024-1400', '2024-265', '2024-109', '2024-116', '2023-2832', '2023-2848', '2023-2849', '2023-2841', '2023-2855', '2023-2851', '2023-2853', '2023-2834', '2023-2835', '2024-844', '2024-1029', '2023-2810', '2024-437', '2024-448', '2024-458', '2024-410', '2024-192', '2024-451', '2024-37', '2024-82', '2024-10', '2024-11', '2024-374', '2024-384', '2022-1522', '2024-355', '2024-26', '2024-28', '2024-39', '2024-53', '2024-31', '2024-36', '2024-55', '2024-45', '2024-18', '2024-21', '2024-52', '2024-52', '2024-284', '2024-33', '2024-1574', '2024-443', '2024-38', '2024-60', '2024-67', '2024-74', '2024-75', '2024-57', '2024-62', '2024-27', '2024-64', '2024-59', '2024-68', '2024-691', '2024-341', '2024-56', '2023-1672', '2024-85', '2024-83', '2024-78', '2024-84', '2024-358', '2024-93', '2024-621', '2022-560', '2024-298', '2022-871', '2024-520', '2024-639', '2024-532', '2024-541', '2024-120', '2024-103', '2024-131', '2024-145', '2023-1661', '2022-257', '2024-113', '2024-110', '2024-138', '2024-157', '2024-122', '2022-660', '2022-310', '2024-118', '2024-114', '2024-111', '2024-101', '2024-128', '2024-133', '2024-146', '2024-159', '2024-149', '2024-591', '2024-147', '2024-914', '2024-161', '2024-171', '2024-164', '2024-170', '2024-177', '2024-173', '2024-201', '2024-181', '2024-185', '2024-641', '2024-188', '2024-196', '2024-202', '2024-182', '2024-175', '2024-239', '2024-33', '2024-221', '2024-191', '2024-211', '2024-251', '2024-245', '2024-250', '2024-249', '2024-253', '2022-1651', '2024-275', '2024-279', '2024-398', '2024-261', '2024-269', '2024-278', '2024-283', '2024-285', '2024-297', '2024-296', '2024-303', '2024-306', '2024-272', '2024-299', '2024-274', '2024-277', '2024-293', '2024-304', '2024-301', '2024-309', '2024-320', '2024-336', '2024-345', '2024-189', '2024-207', '2024-401', '2024-222', '2024-224', '2024-406', '2024-354', '2024-363', '2024-366', '2024-376', '2024-388', '2024-382', '2024-394', '2024-352', '2024-356', '2024-361', '2024-371', '2024-373', '2024-379', '2024-391', '2024-369', '2024-383', '2024-397', '2024-696', '2024-400', '2024-403', '2024-327', '2024-328', '2024-332', '2024-333', '2022-2665', '2024-195', '2024-200', '2024-698', '2024-217', '2024-238', '2024-924', '2024-496', '2024-529', '2024-511', '2024-432', '2024-408', '2024-428', '2024-427', '2024-422', '2024-426', '2024-787', '2024-433', '2024-791', '2024-813', '2024-811', '2024-800', '2024-801', '2024-436', '2024-773', '2024-776', '2024-449', '2024-444', '2024-777', '2024-783', '2024-784', '2024-441', '2024-768', '2024-447', '2024-779', '2024-770', '2023-2080', '2024-823', '2024-778', '2024-781', '2024-810', '2024-855', '2024-853', '2024-852', '2024-850', '2024-847', '2024-846', '2024-845', '2024-727', '2024-457', '2024-453', '2024-450', '2024-840', '2024-839', '2024-838', '2024-837', '2024-1542', '2024-465', '2024-827', '2024-468', '2023-1636', '2024-857', '2024-863', '2024-868', '2024-818', '2024-881', '2024-822', '2024-888', '2024-553', '2024-831', '2024-836', '2024-834', '2024-474', '2023-1973', '2024-557', '2024-991', '2024-1233', '2024-577', '2024-469', '2024-474', '2024-2213', '2024-1257', '2024-506', '2024-994', '2024-544', '2024-972', '2024-534', '2024-429', '2024-493', '2024-929', '2024-569', '2024-885', '2024-860', '2024-901', '2024-515', '2024-866', '2024-872', '2024-527', '2024-880', '2024-524', '2024-581', '2024-517', '2024-521', '2024-484', '2024-499', '2024-466', '2024-502', '2024-485', '2024-486', '2024-560', '2024-897', '2024-467', '2024-887', '2024-896', '2024-899', '2024-550', '2024-571', '2024-523', '2024-907', '2024-911', '2024-583', '2024-918', '2024-584', '2024-903', '2024-923', '2024-587', '2024-590', '2024-910', '2024-595', '20247-606', '2024-603', '2024-890', '2024-597', '2024-556', '2024-921', '2024-572', '2024-612', '2024-578', '2024-470', '2024-997', '2024-622', '2024-538', '2024-624', '2024-662', '2024-859', '2024-864', '2024-966', '2024-970', '2024-487', '2024-974', '2024-982', '2024-501', '2024-985', '2024-503', '2024-995', '2024-509', '2024-988', '2024-669', '2024-516', '2024-519', '2024-522', '2024-949', '2024-526', '2024-681', '2024-931', '2024-861', '2024-620', '2024-941', '2024-588', '2024-943', '2024-947', '2024-530', '2024-958', '2024-542', '2024-645', '2024-533', '2024-650', '2024-514', '2024-625', '2024-642', '2024-963', '2024-535', '2024-938', '2024-920', '2024-679', '2024-659', '2024-922', '2024-708', '2024-930', '2024-598', '2024-604', '2024-608', '2024-613', '2024-618', '2024-694', '2024-714', '2024-713', '2024-693', '2024-701', '2024-705', '2022-498', '2024-762', '2024-746', '2024-743', '2024-664', '2022-36', '2024-723', '2024-732', '2022-106', '2022-85', '2022-133', '2024-1526', '2022-157', '2024-1021', '2024-1023', '2024-1016', '2024-1045', '2024-1051', '2024-712', '2024-751', '2024-730', '2024-764', '2024-1055', '2024-986', '2024-1061', '2024-1079', '2024-658', '2024-989', '2024-719', '2024-1014', '2024-671', '2024-636', '2024-687', '2024-665', '2024-646', '2024-626', '2024-638', '2024-935', '2024-655', '2024-674', '2024-666', '2024-969', '2022-26', '2024-1056', '2024-644', '2024-975', '2024-946', '2022-15', '2022-234', '2024-699', '2024-962', '2024-744', '2024-632', '2024-704', '2024-709', '2024-1084', '2024-1089', '2024-1093', '2024-1101', '2024-1149', '2024-1152', '2024-1138', '2024-1139', '2024-1160', '2024-1168', '2024-1474', '2024-1153', '2024-1178', '2024-1159', '2024-1173', '2024-706', '2024-716', '2024-721', '2024-722', '2024-1030', '2024-731', '2024-1182', '2024-734', '2024-1174', '2024-737', '2024-754', '2022-2155', '2024-1032', '2024-1049', '2024-1042', '2024-1054', '2022-241', '2024-1063', '2024-1070', '2024-1078', '2024-1080', '2024-1095', '2024-1098', '2024-1099', '2024-678', '2024-763', '2024-1017', '2024-1022', '2023-817', '2024-964', '2024-939', '2024-1087', '2024-1092', '2024-1203', '2024-1112', '2024-1102', '2024-1121', '2024-1195', '2024-1201', '2024-2312', '2024-1110', '2022-2611', '2024-1204', '2024-1107', '2023-999', '2024-1833', '2024-1586', '2024-1242', '2024-1247', '2024-1251', '2024-1123', '2024-1217', '2024-1216', '2024-1226', '2024-1154', '2024-1119', '2024-1205', '2024-1136', '2024-1193', '2024-1189', '2024-1266', '2024-1125', '2024-1184', '2024-1125', '2024-1225', '2024-1144', '2022-1699', '2024-1285', '2024-1147', '2024-1261', '2024-1150', '2024-1167', '2024-1169', '2024-1179', '2024-1305', '2024-1221', '2024-1231', '2022-890', '2022-1034', '2024-1241', '2024-1243', '2022-301', '2022-995', '2022-1049', '2024-1250', '2024-1313', '2024-1264', '2024-1270', '2024-1281', '2024-1280', '2024-1254', '2024-1223', '2024-1352', '2024-1222', '2024-1181', '2024-1164', '2024-1155', '2024-1350', '2024-1271', '2024-1286', '2024-1311', '2024-1317', '2022-229', '2022-312', '2024-1314', '2024-1318', '2024-1691', '2024-1330', '2024-1349', '2024-1298', '2024-1374', '2024-1378', '2024-1388', '2024-1395', '2024-1397', '2024-1300', '2024-1293', '2024-1288', '2024-1287', '2024-1289', '2024-1384', '2024-1394', '2024-1463', '2024-133', '2024-2134', '2024-1067', '2024-1453', '2024-1129', '2024-1469', '2024-1372', '2024-1467', '2024-1443', '2024-1427', '2024-1415', '2024-1416', '2024-1426', '2024-1418', '2024-1410', '2024-1417', '2024-1413', '2024-1409', '2024-1390', '2024-1393', '2024-1338', '2024-1455', '2024-1501', '2024-1406', '2024-1385', '2024-1370', '2024-1460', '2024-1342', '2024-1336', '2024-1329', '2024-1326', '2024-1316', '2024-1365', '2024-1343', '2024-1302', '2024-1319', '2024-1344', '2024-1346', '2024-1356', '2024-1358', '2024-1340', '2024-1524', '2024-1456', '2024-1472', '2024-1496', '2024-1345', '2024-1361', '2024-1364', '2024-1500', '2024-1503', '2024-1504', '2024-1468', '2024-1337', '2024-1481', '2024-1489', '2024-1471', '2024-1470', '2024-1528', '2024-1435', '2024-1437', '2024-1436', '2024-1445', '2024-1532', '2024-1555', '2024-1533', '2024-1551', '2024-1499', '2024-1502', '2024-1475', '2024-1506', '2024-1561', '2024-1515', '2024-1509', '2024-1510', '2024-1556', '2024-1515', '2024-1490', '2024-1482', '2424-1529', '2024-1558', '2024-1530', '2024-1548', '2024-1553', '2024-1559', '2024-1610', '2022-990', '2024-1576', '2024-1569', '2024-1562', '2022-869', '2024-1566', '2022-961', '2024-1585', '2024-1591', '2024-1593', '2024-1587', '2024-1592', '2024-1579', '2024-1613', '2024-1602', '2024-1616', '2024-1604', '2024-1609', '2024-1611', '2024-1621', '2024-1601', '2024-1636', '2024-1612', '2024-1618', '2024-1597', '2024-1606', '2024-1614', '2024-1615', '2023-1580', '2024-1624', '2024-1641', '2024-1629', '2024-1640', '2024-1648', '2024-1646', '2024-1631', '2024-1651', '2024-1659', '2024-1676', '2024-1680', '2024-1669', '2024-1664', '2024-1660', '2024-1677', '2024-1682', '2024-1684', '2024-1675', '2024-2395', '2024-1690', '2024-1687', '2024-1665', '2024-1672', '2024-738', '2024-1703', '2024-1696', '2024-1478', '2024-1759', '2024-1712', '2022-99', '2022-300', '2022-699', '2022-483', '2022-532', '2022-236', '2024-1714', '2024-1719', '2024-1722', '2024-1715', '2024-1707', '2022-1055', '2022-1134', '2022-2756', '2024-1688', '2022-261', '2022-925', '2022-855', '2022-1122', '2022-1143', '2024-1723', '2024-1721', '2024-1727', '2024-1711', '2024-1718', '2024-1705', '2024-1713', '2024-1717', '2024-1724', '2024-1728', '2024-1733', '2024-2773', '2022-1029', '2022-657', '2022-987', '2022-1017', '2022-931', '2022-998', '2022-700', '2024-1801', '2024-1808', '2024-1738', '2024-1752', '2024-1743', '2024-1751', '2024-1760', '2024-1767', '2024-1753', '2024-1766', '2024-1793', '2024-1768', '2024-1804', '2024-1756', '2024-1764', '2024-1795', '2024-1774', '2024-1777', '2024-1786', '2024-1791', '2024-1794', '2022-317', '2024-1811', '2024-1757', '2024-1782', '2024-1826', '2024-1819', '2023-2741', '2022-1990', '2024-1815', '2022-533', '2024-1825', '2024-1818', '2024-1813', '2024-1748', '2024-1806', '2024-1735', '2024-1769', '2024-1775', '2024-169', '2024-1787', '2024-1828', '2024-1836', '2024-1827', '2024-1832', '2024-1842', '2023-209', '2022-2012', '2024-1874', '2024-1852', '2024-1871', '2024-1872', '2024-1861', '2024-1857', '2024-1875', '2024-1877', '2024-1867', '2024-1847', '2024-1878', '2024-1883', '2024-1580', '2024-1899', '2024-1885', '2024-1882', '2022-1293', '2024-1917', '2024-1931', '2024-1934', '2024-1919', '2024-1908', '2024-1905', '2024-1943', '2024-1933', '2024-1880', '2024-1904', '2024-1941', '2024-1952', '2024-1913', '2024-1915', '2024-1903', '2024-1951', '2024-1914', '2024-1940', '2024-1925', '2022-1389', '2024-1950', '2024-1132', '2024-1892', '2024-1059', '2024-2033', '2024-2035', '2024-07', '2024-1963', '2024-1964', '2024-1962', '2024-1961', '2024-1957', '2024-1968', '2024-1967', '2024-1982', '2024-1976', '2024-1986', '2024-1983', '2024_1988', '2024-2810', '2024-2015', '2024-2020', '2024-2026', '2024-2017', '2024-560', '2024-2027', '2023-580', '2022-1793', '2022-2184', '2022-1195', '2022-2801', '2023-907', '2023-505', '2023-328', '2023-712', '2023-1147', '2023-1546', '2023-1117', '2023-1621', '2023-46', '2023-1266', '2023-804', '2023-1507', '2023-61', '2022-1593', '2023-823', '2022-1494', '2022-823', '2022-1623', '2023-72', '2022-991', '2023-724', '2023-1022', '2023-854', '2023-258', '2023-378', '2022-2106', '2024-2053', '2022-2263', '2024-2057', '2024-2062', '2023-239', '2022-1870', '2022-1544', '2022-2302', '2022-2272', '2024-2079', '2021-842', '2022-514', '2024-2058', '2024-2046', '2024-2099', '2022-1485', '2024-2014', '2024-2004', '2024-2050', '2024-2030', '2024-3407', '2024-2060', '2024-2069', '2022-838', '2024-2251', '2024-2009', '2024-2018', '2024-2029', '2024-2028', '2024-2022', '2024-2025', '2024-2055', '2024-2031', '2024-1987', '2024-2011', '2024-1984', '2024-1985', '2024-2044', '2024-2032', '2024-2045', '2024-2048', '2024-2065', '2022-779', '2022-902', '2023-2564', '2024-1155', '2022-960', '2022-1739', '2022-1978', '2022-2309', '2022-2332', '2023-66', '2023-396', '2023-469', '2023-1070', '2023-1324', '2024-2910', '2024-2258', '2024-2209', '2024-2232', '2024-2201', '2024-1897', '2024-2198', '2024-2194', '2024-2051', '2024-2090', '2024-2182', '2024-2188', '2023-67', '2024-2187', '2024-2193', '2024-2190', '2024-2107', '2024-2168', '2024-2170', '2024-2165', '2024-2167', '2024-2181', '2024-2174', '2024-2179', '2024-2159', '2024-2162', '2024-2152', '2024-2138', '2024-2107', '2024-2100', '2024-2095', '2024-2158', '2024-2144', '2024-2139', '2024-2121', '2024-2157', '2024-2115', '2024-2136', '2024-2134', '2024-2129', '2024-2109', '2024-2088', '2024-2076', '2024-2166', '2024-2102', '2024-2101', '2024-2092', '2024-2080', '2024-2074', '2024-2081', '2024-2070', '2024-2087', '2024-2085', '2024-2097', '2024-2083', '2024-2178', '2024-2105', '2024-2176', '2024-2098', '2024-2127', '2024-2154', '2024-2202', '2024-2208', '2024-2141', '2024-2204', '2024-2214', '2024-2207', '2024-2206', '2024-2218', '2024-2221', '2024-2216', '2024-2296', '2024-2228', '2024-2225', '2024-2230', '2024-2247', '2024-2243', '2024-2234', '2024-2252', '2024-2255', '2024-2259', '2024-2263', '2024-2261', '2024-2269', '2024-2267', '2024-2277', '2024-2272', '2024-2273', '2024-2262', '2024-2280', '2024-2276', '2024-2236', '2024-2283', '2024-2286', '2024-2289', '2024-2223', '2024-2305', '2024-2299', '2024-2293', '2024-2317', '2024-2321', '2024-2342', '2024-2346', '2024-2336', '2024-2359', '2024-2328', '2024-2331', '2024-2334', '2024-2362', '2024-2360', '2024-2363', '2024-2365', '2024-2370', '2024-2375', '2024-2373', '2024-2650', '2024-2372', '2024-2318', '2024-2322', '2024-2357', '2024-2354', '2024-2351', '2024-2347', '2024-2367', '2024-2313', '2024-2364', '2024-2377', '2024-2211', '2023-1306', '2024-924', '2024-2248', '2024-2390', '2024-2405', '2024-2404', '2024-2402', '2024-2406', '2024-2408', '2024-2407', '2024-2410', '2024-2420', '2024-2412', '2024-2435', '2024-2441', '2024-2427', '2024-2449', '2024-2453', '2024-2456', '2024-2458', '2024-2452', '2024-2446', '2024-2447', '2024-2434', '2024-2455', '2024-2443', '2024-2428', '2024-2419', '2024-2444', '2024-2472', '2024-2473', '2024-2461', '2024-2467', '2024-2474', '2024-2698', '2024-2482', '2024-2477', '2024-2513', '2024-2503', '2024-2501', '2024-2495', '2024-2490', '2024-2506', '2024-2528', '2024-2524', '2024-2542', '2024-2529', '2024-2535', '2024-2526', '2024-2554', '2024-2553', '2024-2557', '2024-2563', '2024-2559', '2024-2463', '2024-2550', '2024-2548', '2024-2525', '2024-2569', '2024-2558', '2024-2519', '2024-2468', '2024-2493', '2024-2496', '2024-2534', '2024-2598', '2024-2537', '2024-2539', '2024-2564', '2024-2607', '2024-2615', '2024-2621', '2024-2622', '2024-2635', '2024-2626', '2024-2582', '2024-2631', '2024-2625', '2024-2619', '2024-2608', '2024-2630', '2024-2647', '2024-2617', '2024-2651', '2024-2601', '2024-2664', '2024-2652', '2024-2578', '2024-2644', '2024-2545', '2024-2518', '2024-2627', '2024-2636', '2024-2602', '2024-2657', '2024-2561', '2024-2610', '2024-2618', '2024-2568', '2024-2552', '2024-931', '2024-2658', '2024-2648', '2024-2693', '2023-968', '2022-2783', '2022-2531', '2022-994', '2022-739', '2022-2350', '2022-2353', '2023-884', '2022-1581', '2023-142', '2022-564', '2022-1294', '2023-699', '2022-2021', '2022-1072', '2022-924', '2022-1217', '2022-2552', '2022-2201', '2023-1085', '2022-1848', '2022-1273', '2022-578', '2022-1590', '2022-594', '2022-1890', '2022-973', '2025-29', '2023-2249', '2022-1821', '2022-2084', '2023-2414', '2023-760', '2023-362', '2022-2592', '2022-2616', '2022-286', '2023-893', '2022-1841', '2023-2014', '2023-432', '2023-250', '2022-2422', '2023-36', '2022-1147', '2022-2376', '2022-2299', '2022-252', '2022-2463', '2022-2326', '2022-1018', '2024-2965', '2024-2255', '2022-1820', '2024-3625', '2024-3506', '2023-616', '2024-3176', '2025-447', '2024-3623', '2024-768', '2024-2088', '2024-2088', '2024-3740', '2025-639', '2023-1947', '2023-983', '2025-200', '2025-146', '2022-538', '2025-334', '2022-2301', '2025-440', '2025-607'];
    private const PARTNER_ID = 6404;

    public function __construct(
        private readonly SignalementRepository $signalementRepository,
        private readonly PartnerRepository $partnerRepository,
        private readonly AffectationManager $affectationManager,
        private readonly ParameterBagInterface $parameterBag,
        private readonly UserManager $userManager,
    ) {
        parent::__construct();
    }

    protected function execute(InputInterface $input, OutputInterface $output): int
    {
        $io = new SymfonyStyle($input, $output);

        $partner = $this->partnerRepository->findOneBy(['id' => self::PARTNER_ID]);
        $adminEmail = $this->parameterBag->get('user_system_email');
        $adminUser = $this->userManager->findOneBy(['email' => $adminEmail]);

        foreach (self::SIGNALEMENTS_REFERENCE as $signalementReference) {
            $signalement = $this->signalementRepository->findOneBy(['reference' => $signalementReference, 'territory' => $partner->getTerritory()]);
            if (!$signalement) {
                continue;
            }

            $affectationStatus = SignalementStatus::ACTIVE === $signalement->getStatut() ? Affectation::STATUS_ACCEPTED : Affectation::STATUS_CLOSED;

            $affectation = (new Affectation())
                ->setSignalement($signalement)
                ->setPartner($partner)
                ->setTerritory($partner->getTerritory())
                ->setAffectedBy($adminUser)
                ->setAnsweredBy($adminUser)
                ->setAnsweredAt(new \DateTimeImmutable())
                ->setIsSynchronized(true)
                ->setStatut($affectationStatus);
            $this->affectationManager->save($affectation);
        }

        $io->success(\count(self::SIGNALEMENTS_REFERENCE).' signalements were affected to partner.');

        return Command::SUCCESS;
    }
}
